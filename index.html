<?php
// request-allocation.php
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request Allocation - Research Computing Data Core</title>
    
    <style>
        /* Maintain UH theme colors and styles */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            background-color: #f5f5f5;
        }
        
        /* Header styles */
        .uh-header {
            background-color: #C8102E;
            color: white;
            padding: 20px 0;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .uh-logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: white;
        }
        
        .uh-logo img {
            height: 40px;
            margin-right: 10px;
        }
        
        .nav-links {
            display: flex;
            gap: 30px;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
        }
        
        /* Main content area */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            min-height: 600px;
        }
        
        .breadcrumb {
            color: #666;
            margin-bottom: 30px;
        }
        
        .breadcrumb a {
            color: #C8102E;
            text-decoration: none;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        
        /* Form selection styles */
        .form-selector {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .form-selector h2 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .form-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            max-width: 800px;
        }
        
        .form-option {
            background: white;
            border: 2px solid #ddd;
            padding: 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .form-option:hover {
            border-color: #C8102E;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .form-option input[type="radio"] {
            margin-right: 10px;
        }
        
        .form-option label {
            display: block;
            cursor: pointer;
            font-weight: 500;
            color: #333;
        }
        
        .form-description {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .submit-btn {
            background-color: #C8102E;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
        }
        
        .submit-btn:hover {
            background-color: #a00825;
        }
        
        /* Embedded form container */
        .form-container {
            display: none;
            margin-top: 30px;
        }
        
        .form-container.active {
            display: block;
        }
        
        .form-notice {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .form-notice a {
            color: #C8102E;
            font-weight: 500;
        }
        
        .embedded-form {
            width: 100%;
            height: 480px;
            border: none;
            border-radius: 4px;
            max-width: 100%;
            max-height: 100vh;
        }
        
        /* Sidebar styles */
        .content-wrapper {
            display: flex;
            gap: 30px;
        }
        
        .sidebar {
            width: 300px;
            flex-shrink: 0;
        }
        
        .sidebar-section {
            background: #f9f9f9;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        
        .sidebar-section h3 {
            color: #C8102E;
            margin-bottom: 15px;
            font-size: 16px;
            text-transform: uppercase;
        }
        
        .sidebar-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .sidebar-links li {
            margin-bottom: 10px;
        }
        
        .sidebar-links a {
            color: #C8102E;
            text-decoration: none;
        }
        
        .sidebar-links a:hover {
            text-decoration: underline;
        }
        
        .main-content {
            flex: 1;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .form-options {
                grid-template-columns: 1fr;
            }
            
            .content-wrapper {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="uh-header">
        <div class="header-content">
            <a href="https://www.uh.edu" class="uh-logo">
                <span style="font-size: 24px; font-weight: bold;">UNIVERSITY OF HOUSTON</span>
            </a>
            <nav class="nav-links">
                <a href="#">Visit</a>
                <a href="#">Apply</a>
                <a href="#">Give</a>
            </nav>
        </div>
    </header>
    
    <!-- RCDC Header -->
    <div style="background-color: #8B1538; color: white; padding: 40px 0;">
        <div class="header-content">
            <h1 style="margin: 0; font-size: 48px; font-weight: 300;">Research Computing Data Core</h1>
        </div>
    </div>
    
    <!-- Navigation Bar -->
    <div style="background-color: #6d1229; color: white; padding: 15px 0;">
        <div class="header-content">
            <nav style="display: flex; gap: 30px;">
                <a href="#" style="color: white; text-decoration: none;">HPE DSI</a>
                <a href="#" style="color: white; text-decoration: none;">Getting Started ▼</a>
                <a href="#" style="color: white; text-decoration: none;">Resources ▼</a>
                <a href="#" style="color: white; text-decoration: none;">Support & Services ▼</a>
                <a href="#" style="color: white; text-decoration: none;">Acknowledgement</a>
            </nav>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-container">
        <div class="breadcrumb">
            <a href="https://uh.edu">UH Home</a> > 
            <a href="#">Division of Research</a> > 
            <a href="#">Research Computing Data Core</a> > 
            Request Allocation
        </div>
        
        <div class="content-wrapper">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3>Division of Research</h3>
                    <ul class="sidebar-links">
                        <li><a href="#">About</a></li>
                        <li><a href="#">Funding Opportunities</a></li>
                        <li><a href="#">Sponsored Projects</a></li>
                        <li><a href="#">Compliance</a></li>
                        <li><a href="#">News and Events</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                
                <div class="sidebar-section">
                    <h3>RCDC</h3>
                    <ul class="sidebar-links">
                        <li><a href="#">Getting Started</a></li>
                        <li><a href="#">Request Account</a></li>
                        <li style="background: #C8102E; margin: 0 -20px; padding: 10px 20px;">
                            <a href="#" style="color: white;">Request Allocation</a>
                        </li>
                        <li><a href="#">Resources</a></li>
                        <li><a href="#">Support & Services</a></li>
                        <li><a href="#">Acknowledgement</a></li>
                    </ul>
                </div>
                
                <div class="sidebar-section">
                    <h3>ANY QUESTIONS?</h3>
                    <p style="font-size: 14px; color: #666;">
                        We will be happy to answer any questions you may have about the allocation process at 
                        <a href="mailto:contact@hpedsi.uh.edu">contact@hpedsi.uh.edu</a>.
                    </p>
                </div>
            </aside>
            
            <!-- Main Content Area -->
            <div class="main-content">
                <h1>Request Resources/Allocation on RCDC Clusters</h1>
                
                <p>An allocation is a quantity of computing time and storage resources that are granted to a principal investigator (PI). 
                To apply for a PI account please refer to <a href="#" style="color: #C8102E;">Request Account</a>.</p>
                
                <p>The basic unit of computational resources is the service unit (SU), which represents the use of one core for one hour on the Sabine 
                Cluster. Allocations are intended to support researchers furthering specific research and have a duration of 1 year. Dedicated 
                resources acquired through the <a href="#" style="color: #C8102E;">Cluster Partnership Program</a> (Condo Model) are not governed by this allocation policy.</p>
                
                <p>It may take up to a week to process your request.</p>
                
                <div style="background: #f0f0f0; padding: 20px; border-radius: 4px; margin: 20px 0;">
                    <em>Please allow extra time if your request is for more than 250,000 SUs, because such cases require approval from the Director of HPE DSI.</em>
                </div>
                
                <!-- Form Selection -->
                <div class="form-selector" id="formSelector">
                    <h2>Select the type of allocation request:</h2>
                    <div class="form-options">
                        <div class="form-option">
                            <label>
                                <input type="radio" name="formType" value="storage">
                                <strong>Additional Storage Resources</strong>
                                <div class="form-description">Request additional storage for your existing project</div>
                            </label>
                        </div>
                        <div class="form-option">
                            <label>
                                <input type="radio" name="formType" value="renew">
                                <strong>Renew Existing Project</strong>
                                <div class="form-description">Annual renewal (by August 1st)</div>
                            </label>
                        </div>
                        <div class="form-option">
                            <label>
                                <input type="radio" name="formType" value="new">
                                <strong>New Project Allocation</strong>
                                <div class="form-description">Request resources for a new research project</div>
                            </label>
                        </div>
                        <div class="form-option">
                            <label>
                                <input type="radio" name="formType" value="compute">
                                <strong>Additional Compute Resources</strong>
                                <div class="form-description">Request additional compute resources for your project</div>
                            </label>
                        </div>
                    </div>
                    <button class="submit-btn" onclick="showSelectedForm()">Continue to Form</button>
                </div>
                
                <!-- Form Container -->
                <div class="form-container" id="formContainer">
                    <div class="form-notice">
                        <strong>Note:</strong> If the form below does not load properly, 
                        <a href="#" id="directLink" target="_blank">please click here to open it in a new window</a>.
                    </div>
                    <iframe id="msForm" class="embedded-form" src=""></iframe>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Form URLs with embed=true parameter for better compatibility
        const formUrls = {
            storage: 'https://forms.office.com/Pages/ResponsePage.aspx?id=vboLF_CikEytSw6PDwxCWUNNjUjgu1tNsgpg0NtTVe9UNlFRR1hGNFMwOUJEUDBXSDBSRDYyOTdJVy4u&embed=true',
            renew: 'https://forms.office.com/Pages/ResponsePage.aspx?id=vboLF_CikEytSw6PDwxCWUNNjUjgu1tNsgpg0NtTVe9UNUNFVDdRRDNZRUpaME80RkVVV0IySURNVy4u&embed=true',
            new: 'https://forms.office.com/Pages/ResponsePage.aspx?id=vboLF_CikEytSw6PDwxCWUNNjUjgu1tNsgpg0NtTVe9UNjhOTjY0UDQ3NllLVkhWS09UR1YxWE82Uy4u&embed=true',
            compute: 'https://forms.office.com/Pages/ResponsePage.aspx?id=vboLF_CikEytSw6PDwxCWUNNjUjgu1tNsgpg0NtTVe9UQVBIS0hVRkI1UDBTV0JSOElLVkg1RTVRNy4u&embed=true'
        };
        
        function showSelectedForm() {
            const selectedOption = document.querySelector('input[name="formType"]:checked');
            
            if (!selectedOption) {
                alert('Please select a form type before continuing.');
                return;
            }
            
            const formType = selectedOption.value;
            const formUrl = formUrls[formType];
            
            // Hide form selector
            document.getElementById('formSelector').style.display = 'none';
            
            // Show form container
            const formContainer = document.getElementById('formContainer');
            formContainer.classList.add('active');
            
            // Set iframe source
            document.getElementById('msForm').src = formUrl;
            
            // Set direct link
            document.getElementById('directLink').href = formUrl;
            
            // Scroll to form
            formContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        // Add reset button functionality (optional)
        function resetForm() {
            document.getElementById('formSelector').style.display = 'block';
            document.getElementById('formContainer').classList.remove('active');
            document.getElementById('msForm').src = '';
            document.querySelector('input[name="formType"]:checked').checked = false;
        }
    </script>
</body>
</html>
